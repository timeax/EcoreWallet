import{r as u,j as r,R as C,c as _,a as S,d as W}from"./app-DPeqRPcX.js";import{g as j,i as g,C as E,T as x,s as P,a as y}from"./index-BtqGtben.js";import{u as k}from"./LiveContext-C6thlj0u.js";import{C as N}from"./index-D7pfYsby.js";import{a as D}from"./index-euvBnKB1.js";import{T}from"./tooltip.esm-B48pQ4fn.js";import{C as I}from"./currency-format-BghgJM0E.js";import{r as L}from"./index-DAW83uBr.js";import{C as v}from"./CryptoIcon-C9dw8rPY.js";import{S as R}from"./SparkLineChart-HV9NeAH3.js";import"./iconBase-BE7iW8MJ.js";import"./componentbase.esm-CEyx904k.js";import"./portal.esm-ZPKbRoAC.js";import"./index-DOPl3nEV.js";import"./index-B-zkmOMm.js";import"./objectWithoutPropertiesLoose-BwfzGx52.js";import"./DefaultPropsProvider-D26WL4Gi.js";import"./resolveProps-DGHzvMqG.js";import"./useEnhancedEffect-AJ7aGHKx.js";const F="_main_1piau_1",U="_stacked_1piau_11",A="_wallet_1piau_14",$="_controls_1piau_57",z="_control_1piau_57",B="_mobileWallet_1piau_86",G="_percent_1piau_93",q="_graph_1piau_102",m={main:F,stacked:U,wallet:A,controls:$,control:z,mobileWallet:B,percent:G,graph:q},dr=({wallets:s,change:d,wallet:c})=>{const[e,n]=u.useState(s);u.useEffect(()=>{const t=[...s];if(c){const i=t.findIndex(a=>a===c);i>-1&&(t.splice(i,1),t.unshift(c),n(t))}},[c]);const o=e.length;return r.jsxs("div",{className:m.stacked,children:[e.map((t,i)=>{const a=o-i;return r.jsx(H,{change:d,wallet:t,index:a},t.id)}),r.jsx("div",{className:m.controls,children:e.map((t,i)=>{const a=j(t.curr),l=`controls-${i}`;return r.jsxs(C.Fragment,{children:[r.jsx(T,{target:l}),r.jsx("span",{"data-pr-tooltip":t.curr.curr_name,onClick:p=>d(t),style:{background:a},className:_(m.control,l)},t.id)]},i)})})]})},lr=({wallet:s})=>{const{rates:d,marketData:c,convert:e,currency:n}=k(),[o,t]=u.useState();return u.useEffect(()=>{var i;if(d&&o){const a=(i=d.find(l=>l.id==s.curr.id))==null?void 0:i.data.find(l=>l.to==="USD");a&&t({id:o.id,data:{...o.data,current_price:g.round(a.course,4)}})}},[d]),u.useEffect(()=>{if(c){const i=c.find(a=>a.id==s.curr.id);i&&t(i)}},[c]),r.jsxs(E,{className:m.mobileWallet,container:"!px-4 !py-3 w-full",children:[r.jsx("div",{className:"",children:r.jsx(b,{wallet:s,children:r.jsx(v,{fit:!0,width:"33px",curr:s.curr})})}),r.jsxs("div",{className:"flex flex-col gap-1 mt-3",children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx(b,{wallet:s,children:r.jsx(x,{noPad:!0,children:s.curr.curr_name})}),r.jsxs("span",{style:{background:`rgb(var(--color-${((o==null?void 0:o.data.price_change_percentage_24h)||0)>0?"success":"danger"}-300))`},className:m.percent,children:[g.round((o==null?void 0:o.data.price_change_percentage_24h)||0,2),"%"]})]}),r.jsx("div",{children:r.jsxs(x,{noPad:!0,xl:!0,bold:!0,children:[n==null?void 0:n.symbol,r.jsx(I,{value:e(s.curr.code,(n==null?void 0:n.code)||"USD",s.all_balance.available,2),thousandSeparator:!0,displayType:"text"})]})}),r.jsx("div",{className:"flex items-center",children:r.jsx(x,{noPad:!0,xs:!0,brighter:!0,children:s.curr.code})})]})]})},b=({children:s,className:d="",wallet:c})=>r.jsx(S,{href:route(L("wallets").route,{id:c.id}),className:d,children:s}),H=({wallet:s,index:d,change:c})=>{const[e,n]=u.useState(),{rates:o,marketData:t,convert:i,currency:a}=k();u.useEffect(()=>{var p;if(o&&e){const h=(p=o.find(f=>f.id==s.curr.id))==null?void 0:p.data.find(f=>f.to==="USD");h&&e&&n({id:e.id,data:{...e.data,current_price:g.round(h.course,4)}})}},[o]),u.useEffect(()=>{if(t){const p=t.find(h=>h.id==s.curr.id);p&&n(p)}},[t]);const l=j(s.curr);return r.jsx(r.Fragment,{children:r.jsxs("div",{onClick:p=>c(s),className:_(m.main,m.wallet),style:{background:N(l).lighten(.3).string(),zIndex:d},children:[r.jsxs(b,{wallet:s,className:"flex gap-1",children:[r.jsx(v,{fit:!0,width:"25px",curr:s.curr}),r.jsx(x,{noPad:!0,xl:!0,bold:!0,white:!0,children:s.curr.curr_name})]}),r.jsx("div",{className:"py-1",children:r.jsxs(x,{noPad:!0,medium:!0,sm:!0,white:!0,className:"flex gap-2 items-center",children:[r.jsxs("span",{children:["1 ",s.curr.code]}),r.jsx(D,{}),r.jsxs("span",{children:["$",e==null?void 0:e.data.current_price]})]})}),r.jsx("div",{}),r.jsx("div",{className:"mt-auto grow z-[999]",children:P(e==null?void 0:e.data.sparkline_in_7d,r.jsx("div",{className:_(W.graph,"h-full grow top-[-10px] relative"),children:r.jsx(R,{height:70,colors:[j(s.curr)],data:e==null?void 0:e.data.sparkline_in_7d.price})}))}),r.jsx("div",{className:"gap-1 absolute top-[80%] flex",children:r.jsxs(x,{white:!0,bold:!0,lg:!0,noPad:!0,children:[i(s.curr.code,(a==null?void 0:a.code)||"USD",s.balance,6)," ",a==null?void 0:a.code]})}),r.jsx(y,{sx:{height:"90px",width:"90px",borderRadius:"50%",background:N(l).fade(.7).string(),right:-50,position:"absolute",top:"25%"}})]},s.id)})};export{lr as Portifolio,dr as WalletGroup};
