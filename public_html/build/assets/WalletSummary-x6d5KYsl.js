import{r as v,j as e,d as D}from"./app-Dy4LvLRF.js";import{c as w}from"./StyledButton-8JroDcsV.js";import{I as C}from"./IconButton-F67XAmfK.js";import{i as d,C as S,T as m,e as I,a as T}from"./index-BJExDeV9.js";import{C as _}from"./Cardheader-D7DH9b8P.js";import{r as u,b as G}from"./index-O4j8kqIm.js";import{c as L}from"./index-d7zu85NA.js";import{G as y}from"./iconBase-DZCv2ijQ.js";import{G as P}from"./index-Da1p3if4.js";import{b as A}from"./index-CmxVb01E.js";import{B as b}from"./index-dnLEsu6m.js";import{u as F}from"./LiveContext-CSkIh4oq.js";import{C as R}from"./currency-format-CTpoYpuH.js";function U(s){return y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5.75 8.5a.75.75 0 0 1 .75.75v7.19L16.72 6.22a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L7.56 17.5h7.19a.75.75 0 0 1 0 1.5h-9a.75.75 0 0 1-.75-.75v-9a.75.75 0 0 1 .75-.75Z"},child:[]}]})(s)}function W(s){return y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.25 15.5a.75.75 0 0 1-.75-.75V7.56L7.28 17.78a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L16.44 6.5H9.25a.75.75 0 0 1 0-1.5h9a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-.75.75Z"},child:[]}]})(s)}const E=({history:s,wallet:a})=>{let o=(s==null?void 0:s.filter(t=>t.currency_id==a.curr.id))||[];const{convert:n,marketData:l,currency:r}=F(),[c,B]=v.useState(),h=o==null?void 0:o.filter(t=>t.type=="+"&&t.status=="success"),p=o==null?void 0:o.filter(t=>t.type=="-"&&t.status=="success");let f=h.length>0?h.reduce((t,i)=>({amount:d.plus(t.amount,i.amount,i.charge)})):{amount:0},j=p.length>0?p.reduce((t,i)=>({amount:d.plus(t.amount,i.amount,i.charge)})):{amount:0};v.useEffect(()=>{if(l){let t=l.find(i=>i.id==a.curr.id);t&&B(t)}},[l]);const g=d.plus(f.amount,j.amount);return e.jsx("section",{children:e.jsxs(S,{className:"!bg-transparent",container:"!px-0 !py-0",children:[e.jsxs(_,{variant:"title",children:[e.jsx(e.Fragment,{children:"Wallet Summary"}),e.jsx(C,{href:route(u("wallets").route),children:e.jsx(L,{})})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx(N,{type:"out",curr:a.curr.code,total:g,text:"Outcome",value:j.amount}),e.jsx(N,{type:"in",curr:a.curr.code,total:g,text:"Income",color:w("primary"),value:f.amount})]}),e.jsxs("div",{className:"flex gap-2 mt-8",children:[e.jsx(x,{symbol:r==null?void 0:r.symbol,data:c,icon:e.jsx(P,{}),change:"+20%",color:"primary",label:"Total",value:n(a.curr.code,(r==null?void 0:r.code)||"USD",a.all_balance.total,2)}),e.jsx(x,{symbol:r==null?void 0:r.symbol,data:c,icon:e.jsx(A,{}),change:"+20%",color:"success",label:"Available",value:n(a.curr.code,(r==null?void 0:r.code)||"USD",a.all_balance.available,2)}),e.jsx(x,{symbol:r==null?void 0:r.symbol,data:c,icon:e.jsx(G,{}),change:"+20%",color:"warning",label:"Pending",value:n(a.curr.code,(r==null?void 0:r.code)||"USD",a.all_balance.escrow,2)})]}),e.jsxs("div",{className:"flex mt-6",children:[e.jsxs(b,{href:route(u("fund").route,{wallet:a.curr.code}),shape:"pill",children:["Deposit ",a.curr.code]}),e.jsxs(b,{href:route(u("withdraw").route,{wallet:a.curr.code}),variant:"none",children:["Withdraw ",a.curr.code]})]})]})})},x=({icon:s,label:a,value:o,color:n="theme",data:l,symbol:r="$"})=>e.jsx(S,{className:"w-[33%] shadow-2xl !rounded-xl shadow-black/5 overflow-hidden text-ellipsis",container:"!px-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex",children:e.jsx(C,{className:"!p-3 mr-auto rounded-xl !text-white",size:"20px",variant:"contained",bgColor:n,children:s})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(m,{bright:!0,noPad:!0,bold:!0,children:a}),e.jsxs(m,{className:"text-ellipsis overflow-clip relative",noPad:!0,xl:!0,children:[r," ",e.jsx(R,{value:o,displayType:"text",thousandSeparator:!0,renderText:c=>e.jsx("span",{children:c})})]}),e.jsxs(m,{brighter:!0,noPad:!0,sm:!0,children:[d.round((l==null?void 0:l.data.price_change_percentage_24h)||"0",2),"%"]})]})]})}),N=({text:s,total:a,curr:o,value:n,type:l,color:r=w("warning")})=>e.jsx(I,{className:"grow !rounded-lg shadow-2xl shadow-theme-text/10   py-2 px-1",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{sx:{"--w":"55px","--c":r,"--b":"5px",overflow:"hidden","--p":d.times(d.divide(n,a),100),borderRadius:"50%",boxShadow:"0px 1rem 1rem 2px rgb(200 163 97 / 14%)"},className:D.pie,children:e.jsx("div",{className:"flex m-auto size-[90%] rounded-full items-center justify-center bg-warning-50/10",children:l=="in"?e.jsx(U,{}):e.jsx(W,{})})}),e.jsxs("div",{children:[e.jsx(m,{medium:!0,md:!0,className:"!text-theme-button-hover",children:s}),e.jsxs(m,{medium:!0,md:!0,className:"",children:[d.round(n,2)," ",o]})]})]})}),Y=E;export{x as Total,Y as default};
