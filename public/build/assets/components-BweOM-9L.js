import{r as m,j as r,R as k,c as _,d as v}from"./app-CXhxP4IC.js";import{T as x}from"./index-ByMu0qn2.js";import{g,i as j,s as C,T as z}from"./index-uIOWaCi_.js";import{u as N}from"./LiveContext-DcvojEoZ.js";import{C as b}from"./index-Bx7c_DKU.js";import{F as S}from"./index-CRiK872-.js";import{T as E}from"./tooltip.esm-A3nGpM54.js";import{C as P}from"./index-CGiUeyTh.js";import{C as T}from"./currency-format-Dx_jRBKB.js";import{S as W}from"./SparkLineChart-rUuOPS3w.js";import"./index-Cur7t6HG.js";import"./iconBase-DWzPX-n0.js";import"./objectWithoutPropertiesLoose-BwfzGx52.js";import"./useEnhancedEffect-C9VTFToP.js";const D="_main_190zd_1",F="_stacked_190zd_11",R="_wallet_190zd_14",y="_controls_190zd_57",L="_control_190zd_57",U="_mobileWallet_190zd_86",A="_percent_190zd_93",I="_graph_190zd_102",p={main:D,stacked:F,wallet:R,controls:y,control:L,mobileWallet:U,percent:A,graph:I},rr=({wallets:e,change:l,wallet:i})=>{const[s,c]=m.useState(e);m.useEffect(()=>{const t=[...e];if(i){const n=t.findIndex(o=>o===i);n>-1&&(t.splice(n,1),t.unshift(i),c(t))}},[i]);const a=s.length;return r.jsxs("div",{className:p.stacked,children:[s.map((t,n)=>{const o=a-n;return r.jsx($,{change:l,wallet:t,index:o},t.id)}),r.jsx("div",{className:p.controls,children:s.map((t,n)=>{const o=g(t.curr.curr_name),d=`controls-${n}`;return r.jsxs(k.Fragment,{children:[r.jsx(E,{target:d}),r.jsx("span",{"data-pr-tooltip":t.curr.curr_name,onClick:u=>l(t),style:{background:o},className:_(p.control,d)},t.id)]},n)})})]})},sr=({wallet:e})=>{const{rates:l,marketData:i,convert:s,currency:c}=N(),[a,t]=m.useState();return m.useEffect(()=>{var n;if(l&&a){const o=(n=l.find(d=>d.id==e.curr.id))==null?void 0:n.data.find(d=>d.to==="USD");o&&t({id:a.id,data:{...a.data,current_price:j.round(o.course,4)}})}},[l]),m.useEffect(()=>{if(i){const n=i.find(o=>o.id==e.curr.id);n&&t(n)}},[i]),r.jsxs(P,{className:p.mobileWallet,container:"!px-4 !py-3 w-full",children:[r.jsx("div",{className:"",children:r.jsx("img",{src:a==null?void 0:a.data.image,width:"33px"})}),r.jsxs("div",{className:"flex flex-col gap-1 mt-3",children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx(x,{noPad:!0,children:e.curr.curr_name}),r.jsxs("span",{style:{background:`rgb(var(--color-${((a==null?void 0:a.data.price_change_percentage_24h)||0)>0?"success":"danger"}-300))`},className:p.percent,children:[j.round((a==null?void 0:a.data.price_change_percentage_24h)||0,2),"%"]})]}),r.jsx("div",{children:r.jsxs(x,{noPad:!0,xl:!0,bold:!0,children:[c==null?void 0:c.symbol,r.jsx(T,{value:s(e.curr.code,(c==null?void 0:c.code)||"USD",e.all_balance.available,2),thousandSeparator:!0,displayType:"text"})]})}),r.jsx("div",{className:"flex items-center",children:r.jsx(x,{noPad:!0,xs:!0,brighter:!0,children:e.curr.code})})]})]})},$=({wallet:e,index:l,change:i})=>{const[s,c]=m.useState(),{rates:a,marketData:t,convert:n,currency:o}=N();m.useEffect(()=>{var u;if(a&&s){const h=(u=a.find(f=>f.id==e.curr.id))==null?void 0:u.data.find(f=>f.to==="USD");h&&s&&c({id:s.id,data:{...s.data,current_price:j.round(h.course,4)}})}},[a]),m.useEffect(()=>{if(t){const u=t.find(h=>h.id==e.curr.id);u&&c(u)}},[t]);const d=g(e.curr.curr_name);return r.jsx(r.Fragment,{children:r.jsxs("div",{onClick:u=>i(e),className:_(p.main,p.wallet),style:{background:b(d).lighten(.3).string(),zIndex:l},children:[r.jsxs("div",{className:"flex gap-1",children:[r.jsx("img",{src:s==null?void 0:s.data.image,width:"25px",alt:""}),r.jsx(x,{noPad:!0,xl:!0,bold:!0,white:!0,children:e.curr.curr_name})]}),r.jsx("div",{className:"py-1",children:r.jsxs(x,{noPad:!0,medium:!0,sm:!0,white:!0,className:"flex gap-2 items-center",children:[r.jsxs("span",{children:["1 ",e.curr.code]}),r.jsx(S,{}),r.jsxs("span",{children:["$",s==null?void 0:s.data.current_price]})]})}),r.jsx("div",{}),r.jsx("div",{className:"mt-auto grow z-[999]",children:C(s==null?void 0:s.data.sparkline_in_7d,r.jsx("div",{className:_(v.graph,"h-full grow top-[-10px] relative"),children:r.jsx(W,{height:70,colors:[g(e.curr.curr_name)],data:s==null?void 0:s.data.sparkline_in_7d.price})}))}),r.jsx("div",{className:"gap-1 absolute top-[80%] flex",children:r.jsxs(x,{white:!0,bold:!0,lg:!0,noPad:!0,children:[n(e.curr.code,(o==null?void 0:o.code)||"USD",e.balance,6)," ",o==null?void 0:o.code]})}),r.jsx(z,{sx:{height:"90px",width:"90px",borderRadius:"50%",background:b(d).fade(.7).string(),right:-50,position:"absolute",top:"25%"}})]},e.id)})};export{sr as Portifolio,rr as WalletGroup};
