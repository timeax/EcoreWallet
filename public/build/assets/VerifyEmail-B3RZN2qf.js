import{R as h,r as P,P as q,b as z,O as Q,W as Z,y as ee,j as u,Y as te,a as ne}from"./app-CXhxP4IC.js";import{G as re}from"./GuestLayout-BDi40Hfp.js";import{C as ae,u as oe,a as ie,b as le}from"./tooltip.esm-A3nGpM54.js";import{I as ue}from"./inputtext.esm-GbgemPKy.js";import{B as se}from"./button.esm-BWtOUSc7.js";import{F as ce}from"./index-SyAJMH_1.js";import"./iconbase.esm-Cq4ooEvg.js";import"./ripple.esm-CLCo6fDN.js";import"./iconBase-DWzPX-n0.js";function E(){return E=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},E.apply(this,arguments)}function _(t,r){(r==null||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function pe(t){if(Array.isArray(t))return _(t)}function de(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function B(t,r){if(t){if(typeof t=="string")return _(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(t);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return _(t,r)}}function fe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k(t){return pe(t)||de(t)||B(t)||fe()}function ve(t){if(Array.isArray(t))return t}function me(t,r){var o=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(o!=null){var i,p,v,m,e=[],f=!0,y=!1;try{if(v=(o=o.call(t)).next,r!==0)for(;!(f=(i=v.call(o)).done)&&(e.push(i.value),e.length!==r);f=!0);}catch(b){y=!0,p=b}finally{try{if(!f&&o.return!=null&&(m=o.return(),Object(m)!==m))return}finally{if(y)throw p}}return e}}function ye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function be(t,r){return ve(t)||me(t,r)||B(t,r)||ye()}function x(t){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},x(t)}function ge(t,r){if(x(t)!=="object"||t===null)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var i=o.call(t,r||"default");if(x(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function he(t){var r=ge(t,"string");return x(r)==="symbol"?r:String(r)}function xe(t,r,o){return r=he(r),r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var je={root:"p-inputotp p-component",input:"p-inputotp-input"},S=ae.extend({defaultProps:{__TYPE:"InputOtp",__parentMetadata:null,className:null,modelValue:!1,invalid:!1,disabled:!1,readOnly:!1,variant:null,tabIndex:null,length:4,mask:!1,integerOnly:!1},css:{classes:je}});function D(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(t,p).enumerable})),o.push.apply(o,i)}return o}function C(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?D(Object(o),!0).forEach(function(i){xe(t,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):D(Object(o)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))})}return t}var R=h.memo(h.forwardRef(function(t,r){var o,i,p=P.useRef(r),v=oe(),m=P.useContext(q),e=S.getProps(t,m),f=S.setMetaData(C(C({props:e},e.__parentMetadata),{},{context:{disabled:e.disabled}})),y=f.ptm,b=f.cx,d=f.isUnstyled;ie(S.css.styles,d,{name:"inputotp"});var O=e.value?(o=e.value)===null||o===void 0||(o=o.toString())===null||o===void 0||(i=o.split)===null||i===void 0?void 0:i.call(o,""):new Array(e.length),T=P.useState(O),j=be(T,2),g=j[0],I=j[1],F=function l(n){var a=n.nextElementSibling;if(a)return a.nodeName==="INPUT"?a:l(a)},K=function l(n){var a=n.previousElementSibling;if(a)return a.nodeName==="INPUT"?a:l(a)},N=function(n){var a=F(n.target);a&&(a.focus(),a.select())},w=function(n){var a=K(n.target);a&&(a.focus(),a.select())},A=function(n,a){var c;e==null||(c=e.onChange)===null||c===void 0||c.call(e,{originalEvent:n,value:a.join("")})},M=function(n,a){var c=n.target.value,s=k(g);s[a]=c,s=s.join(""),s=s?s.split(""):new Array(e.length),I(s),A(n,s)},U=function(n,a){e.disabled||e.readOnly||n.nativeEvent.inputType!=="insertFromPaste"&&(M(n,a),n.nativeEvent.inputType==="deleteContentBackward"?w(n):(n.nativeEvent.inputType==="insertText"||n.nativeEvent.inputType==="deleteContentForward")&&N(n))},V=function(n){if(!(e.disabled||e.readOnly)){var a=n.clipboardData.getData("text");if(a.length){var c=a.substring(0,e.length+1);if(!e.integerOnly||!isNaN(c)){var s=c.split("");I(s),A(n,s)}}}},$=function(n){var a;n.target.select(),e==null||(a=e.focus)===null||a===void 0||a.call(e,n)},L=function(n){var a;e==null||(a=e.blur)===null||a===void 0||a.call(e,n)},H=function(n){if(!(e.disabled||e.readOnly)&&!(n.altKey||n.ctrlKey||n.metaKey))switch(n.code){case"ArrowLeft":{w(n),n.preventDefault();break}case"ArrowRight":{N(n),n.preventDefault();break}case"Backspace":{var a;((a=n.target)===null||a===void 0||(a=a.value)===null||a===void 0?void 0:a.length)===0&&(w(n),n.preventDefault());break}case"ArrowUp":case"ArrowDown":{n.preventDefault();break}case"Tab":case"Enter":break;default:{(e!=null&&e.integerOnly&&!(Number(n.key)>=0&&Number(n.key)<=9)||g.join("").length>=e.length&&n.code!=="Delete")&&n.preventDefault();break}}};le(function(){var l,n,a=e.value?(l=e.value)===null||l===void 0||(l=l.toString())===null||l===void 0||(n=l.split)===null||n===void 0?void 0:n.call(l,""):new Array(e.length);I(a)},[e.value]);var W=function l(n){if(n<=0)return[];var a=e.length-n,c={onInput:function(X){return U(X,a)},onKeyDown:H,onFocus:$,onBlur:L,onPaste:V},s=v({id:a,key:a,value:g[a]||"",inputMode:e!=null&&e.integerOnly?"numeric":"text",type:e!=null&&e.mask?"password":"text",variant:e==null?void 0:e.variant,readOnly:e==null?void 0:e.readOnly,disabled:e==null?void 0:e.disabled,invalid:e==null?void 0:e.invalid,tabIndex:e==null?void 0:e.tabIndex,unstyled:e==null?void 0:e.unstyled,"aria-label":z("otpLabel",{0:a+1}),className:b("input")},y("input")),G=e!=null&&e.inputTemplate?Q.getJSXElement(e==null?void 0:e.inputTemplate,{events:c,props:s}):h.createElement(ue,E({},s,c)),J=[G].concat(k(l(n-1)));return J},Y=v({className:b("root"),ref:p,style:e==null?void 0:e.style},y("root"));return h.createElement("div",Y,W(e.length))}));R.displayName="InputOtp";function ke({status:t,code:r,error:o,message:i=""}){const{post:p,processing:v,setData:m,data:e,wasSuccessful:f}=Z({verification_code:null}),y=({events:d,props:{key:O,unstyled:T,invalid:j,...g}})=>u.jsxs(h.Fragment,{children:[u.jsx("input",{...d,...g,type:"text",className:"custom-otp-input-sample",invalid:j+""}),g.id===2&&u.jsx("div",{className:"px-3",children:u.jsx(ce,{})})]},O);t=="success"&&setTimeout(()=>{ee.visit(route("user.dashboard"))},2e3);const b=d=>{d.preventDefault(),p(route("user.verify.check"))};return u.jsxs(re,{children:[u.jsx(te,{title:"Email Verification"}),t&&u.jsx("div",{className:"mb-4 font-medium text-sm text-green-600",children:t==="sent"?u.jsx(u.Fragment,{children:"A new verification link has been sent to the email address you provided during registration."}):t=="expired"?u.jsx("span",{className:"text-orange-500",children:"Verification code has expired"}):t==="error"?u.jsx("span",{className:"text-red-500",children:o}):""}),u.jsx("form",{onSubmit:b,children:u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("p",{className:"font-bold text-xl mb-2",children:"Authenticate Your Account"}),u.jsx("p",{className:"text-color-secondary block mb-5",children:"Please enter the code sent to your phone."}),u.jsx(R,{className:"input",value:e.verification_code,onChange:d=>m("verification_code",d.value),length:6,inputTemplate:y}),u.jsxs("div",{className:"flex justify-between mt-5 self-stretch",children:[u.jsx(ne,{href:route("user.verification.send"),method:"post",as:"button",onClick:d=>{d.preventDefault(),p(route("user.verification.send"))},className:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Resend Code"}),u.jsx(se,{disabled:v,label:"Submit Code"})]})]})})]})}export{ke as default};
